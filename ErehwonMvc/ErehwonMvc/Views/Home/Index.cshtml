@using System.ServiceModel.Syndication
@using ErehwonMvc.ApiController
@using ErehwonMvc.Helpers
@using ErehwonMvc.Models
@{
    ViewBag.Title = "Erehwon Lands";
}

<div class="jumbotron">
    <h1>Erehwon Lands</h1>
    <div id="myCarousel" class="carousel slide" data-ride="carousel">
        <!-- Indicators -->
        <ol class="carousel-indicators">
            <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
            <li data-target="#myCarousel" data-slide-to="1"></li>
            <li data-target="#myCarousel" data-slide-to="2"></li>
            <li data-target="#myCarousel" data-slide-to="3"></li>
        </ol>

        <!-- Wrapper for slides -->
        <div class="carousel-inner" role="listbox">
                                             
            @{
                var pcc = new PlotCategoryController();
                var categories = pcc.Get();
                var count = 0;

                foreach (var plotCategory in categories)
                {
                    var img = ViewHelpers.GetPlotImage(plotCategory.PlotCategoryID, ErehwonMvc.Enums.ImageType.Carousel);

                    var divClass ="item";

                    if (count == 0)
                    {
                        divClass = "item active";
                    }

                    <div class="@divClass">
                        <img src="@img" alt="img">
                    </div>
                    count++;
                }
            }
        </div>

        <!-- Left and right controls -->
        <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
</div>
@{
    <h1>Mis huevos putos</h1>
    <p></p>
}

<div class="row">
    <div class="col-md-4">
        <h2>Most popular blocks</h2>
        <p>
            Should show the most popular
        </p>
        <p><a class="btn btn-default" href="http://go.microsoft.com/fwlink/?LinkId=301865">Learn more &raquo;</a></p>
    </div>
    <div class="col-md-4">
        <h2>Recently purchased blocks</h2>
        <p>Should show the most recently purchased</p>
        <div id="pruebamesta">
            @{
                var test = new PlotDetailModel();
                test.PlotName = "My Plot";
                test.Hectares = 1000;
                test.PlotDescription = "My Desc";
                test.PlotCategoryId = 1;

            }
            @Html.Partial("~/Views/PlotDetail/Plot.cshtml", test)
        </div>
    </div>
    <div class="col-md-4">
        <h2>Availability</h2>
    @{

        foreach (var category in categories)
        {
            var availability = new PlotAvailabilityModel()
            {
                PlotDescription = category.PlotCategoryDescription,
                TotalHectares = category.TotalHectares.Value,
                PlotCategoryId = category.PlotCategoryID,
                PurchasedHectares = 50.0
            };
            @Html.Partial("~/Views/PlotAvailability/PlotAvailability.cshtml", availability);
        }

    }
        
        <p>Show percentage of plots available for each block</p>
    </div>
</div>
